(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e){e.exports={materialitems:[{id:0,title:"coal",amount:1,value:500},{id:1,title:"iron orc",amount:1,value:180}],productitems:[{id:0,title:"steel bar",minLv:40,minPr:.4,maxLv:100,maxPr:1,value:960,exp:30}],calresult:{nextexp:100,nowlevel:100,targetlevel:110}}},17:function(e,t,n){e.exports=n(29)},28:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),l=n(14),u=n(1),c=n(4),o=function(e){var t,n,r,l,u,c,o=e.onNewItem,i=void 0===o?function(e){return e}:o;return a.a.createElement("form",{className:"add-Item",onSubmit:function(e){e.preventDefault(),i(t.value,n.value,r.value,l.value,u.value,c.value),t.value="",n.value="",r.value="",l.value="",u.value="",c.value="",e.preventDefault()}},a.a.createElement("table",null,a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,"\u7269\u54c1\u540d\u7a31"),a.a.createElement("td",null,a.a.createElement("input",{ref:function(e){return t=e},type:"text",placeholder:"\u7269\u54c1\u540d\u7a31",required:!0}))),a.a.createElement("tr",null,a.a.createElement("td",null,"\u8d77\u59cb\u7b49\u7d1a"),a.a.createElement("td",null,a.a.createElement("input",{ref:function(e){return n=e},type:"number",placeholder:"\u8d77\u59cb\u7b49\u7d1a",required:!0}))),a.a.createElement("tr",null,a.a.createElement("td",null,"\u4e0b\u9650\u6a5f\u7387"),a.a.createElement("td",null,a.a.createElement("input",{ref:function(e){return r=e},type:"number",placeholder:"\u4e0b\u9650\u6a5f\u7387",required:!0}))),a.a.createElement("tr",null,a.a.createElement("td",null,"\u4e0a\u9650\u6a5f\u7387"),a.a.createElement("td",null,a.a.createElement("input",{ref:function(e){return l=e},type:"number",placeholder:"\u4e0a\u9650\u6a5f\u7387",required:!0}))),a.a.createElement("tr",null,a.a.createElement("td",null,"\u7cfb\u7d71\u50f9\u683c"),a.a.createElement("td",null,a.a.createElement("input",{ref:function(e){return u=e},type:"number",placeholder:"\u7cfb\u7d71\u50f9\u683c",required:!0}))),a.a.createElement("tr",null,a.a.createElement("td",null,"\u7d93\u9a57\u503c"),a.a.createElement("td",null,a.a.createElement("input",{ref:function(e){return c=e},type:"number",placeholder:"\u7d93\u9a57\u503c",required:!0}))))),a.a.createElement("button",null,"ADD"))},i=function(e){var t,n,r,l=e.onNewItem,u=void 0===l?function(e){return e}:l;return a.a.createElement("form",{className:"add-Item",onSubmit:function(e){e.preventDefault(),u(t.value,n.value,r.value),t.value="",n.value="",r.value="",e.preventDefault()}},a.a.createElement("table",null,a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,"\u7269\u54c1\u540d\u7a31"),a.a.createElement("td",null,a.a.createElement("input",{ref:function(e){return t=e},type:"text",placeholder:"\u7269\u54c1\u540d\u7a31",required:!0}))),a.a.createElement("tr",null,a.a.createElement("td",null,"\u9700\u6c42\u91cf"),a.a.createElement("td",null,a.a.createElement("input",{ref:function(e){return n=e},type:"number",placeholder:"\u9700\u6c42\u91cf",required:!0}))),a.a.createElement("tr",null,a.a.createElement("td",null,"\u7cfb\u7d71\u50f9\u683c"),a.a.createElement("td",null,a.a.createElement("input",{ref:function(e){return r=e},type:"number",placeholder:"\u7cfb\u7d71\u50f9\u683c",required:!0}))))),a.a.createElement("button",null,"ADD"))},m=function(e){var t=e.title,n=e.minLv,r=e.minPr,l=e.maxLv,u=e.maxPr,c=e.value,o=e.exp,i=e.onRemove,m=void 0===i?function(e){return e}:i;return a.a.createElement("section",{className:"item"},a.a.createElement("h1",null,t),a.a.createElement("button",{onClick:m},"X"),a.a.createElement("p",null,"\u4e0b\u9650\u7b49\u7d1a:",n,"\uff0c\u4e0b\u9650\u6a5f\u7387:",r),a.a.createElement("p",null,"\u4e0a\u9650\u7b49\u7d1a:",l,"\uff0c\u4e0a\u9650\u6a5f\u7387:",u),a.a.createElement("p",null,"\u7cfb\u7d71\u50f9\u683c:",c,"\uff0c\u7d93\u9a57\u503c:",o))},v=function(e){var t=e.items,n=void 0===t?[]:t,r=e.onRemove,l=void 0===r?function(e){return e}:r;return a.a.createElement("div",{className:"Item-list"},0===n.length?a.a.createElement("p",null,"\u6c92\u6709\u7269\u54c1"):n.map(function(e){return a.a.createElement(m,Object.assign({key:e.id},e,{onRemove:function(){return l(e.id)}}))}))},d=function(e){var t=e.id,n=e.title,r=e.amount,l=e.value,u=e.onRemove,c=void 0===u?function(e){return e}:u;return a.a.createElement("section",{className:"item"},a.a.createElement("h1",null,"\u7b2c",t+1,"\u7a2e\u539f\u6599"),a.a.createElement("button",{onClick:c},"X"),a.a.createElement("p",null,"\u539f\u6599\u540d\u7a31:",n),a.a.createElement("p",null,"\u539f\u6599\u7528\u91cf:",r),a.a.createElement("p",null,"\u539f\u6599\u50f9\u683c:",l))},E=function(e){var t=e.items,n=void 0===t?[]:t,r=e.onRemove,l=void 0===r?function(e){return e}:r;return a.a.createElement("div",{className:"Item-list"},0===n.length?a.a.createElement("p",null,"\u6c92\u6709\u7269\u54c1"):n.map(function(e){return a.a.createElement(d,Object.assign({key:e.id},e,{onRemove:function(){return l(e.id)}}))}))},f=function(e){var t=e.calresult,n=void 0===t?{}:t,r=e.onclearResult,l=void 0===r?function(e){return e}:r,u=n.productNames,c=n.materialNames,o=n.productValues,i=n.materialValues,m=n.needAmounts,v=n.totalAmount,d=n.productAmounts,E=n.materialAmounts;return Object.keys(n)<=0?a.a.createElement("p",null):a.a.createElement("section",{className:"item"},a.a.createElement("p",null,"\u751f\u7522\u9806\u5e8f:",u.join(" => ")),a.a.createElement("p",null,"\u539f\u6599\u540d\u55ae:",c.map(function(e,t){return"".concat(e,"\u9700\u8981").concat(m[t],"\u500b")}).join(", ")),a.a.createElement("p",null,"\u7e3d\u751f\u7522\u6b21\u6578:",v),a.a.createElement("p",null,"\u6210\u54c1\u7e3d\u751f\u7522\u91cf:",u.map(function(e,t){return"".concat(e,"\u751f\u7522").concat(d[t],"\u500b\u5171").concat(o[t]*d[t],"\u5143")}).join(", ")),a.a.createElement("p",null,"\u539f\u6599\u7e3d\u9700\u6c42\u91cf:",c.map(function(e,t){return"".concat(e,"\u9700\u8981").concat(E[t],"\u500b\u5171").concat(i[t]*E[t],"\u5143")}).join(", ")),a.a.createElement("button",{onClick:l},"\u6e05\u9664\u7d50\u679c"))},p=function(e){var t,n,r,l=e.onCalculation,u=void 0===l?function(e){return e}:l;return a.a.createElement("form",{className:"add-Item",onSubmit:function(e){e.preventDefault(),u(t.value,n.value,r.value),e.preventDefault()}},a.a.createElement("input",{ref:function(e){return t=e},type:"number",placeholder:"\u8d77\u59cb\u7b49\u7d1a",required:!0}),a.a.createElement("input",{ref:function(e){return n=e},type:"number",placeholder:"\u76ee\u6a19\u7b49\u7d1a",required:!0}),a.a.createElement("input",{ref:function(e){return r=e},type:"number",placeholder:"\u4e0b\u500b\u7b49\u7d1a\u6240\u9700\u7d93\u9a57\u503c",required:!0}),a.a.createElement("button",null,"\u8a08\u7b97\u7d50\u679c"))},s={ADD_PRODUCTITEM:"ADD_PRODUCTITEM",ADD_MATERIALITEM:"ADD_MATERIALITEM",REMOVE_ITEM:"REMOVE_ITEM",CALCULATION_RESULT:"CALCULATION_RESULT",CLEAR_RESULT:"CLEAR_RESULT"},b=n(9),h=function(e){return{type:s.REMOVE_ITEM,id:e}},I=Object(u.b)(null,function(e){return{onNewItem:function(t,n,r){e(function(e,t,n){return{type:s.ADD_MATERIALITEM,id:Object(b.v4)(),title:e,amount:t,value:n,timestamp:(new Date).toString()}}(t,n,r))}}})(i),g=Object(u.b)(null,function(e){return{onNewItem:function(t,n,r,a,l,u){e(function(e,t,n,r,a,l){return{type:s.ADD_PRODUCTITEM,id:Object(b.v4)(),title:e,minLv:t,minPr:n,maxLv:parseInt(r,10)-parseInt(n,10)+parseInt(t,10),maxPr:r/100,value:a,exp:l,timestamp:(new Date).toString()}}(t,n,r,a,l,u))}}})(o),A=Object(u.b)(function(e){return{items:Object(c.a)(e.MaterialItems)}},function(e){return{onRemove:function(t){e(h(t))}}})(E),L=Object(u.b)(function(e){return{items:Object(c.a)(e.ProductItems)}},function(e){return{onRemove:function(t){e(h(t))}}})(v),R=Object(u.b)(null,function(e){return{onCalculation:function(t,n,r){e(function(e,t,n,r,a){return{type:s.CALCULATION_RESULT,MaterialItems:e,ProductItems:t,nowlevel:n,targetlevel:r,nextexp:a}}(t,n,r))}}})(p),D=Object(u.b)(function(e){return{calresult:e.calresult}},function(e){return{onclearResult:function(){e({type:s.CLEAR_RESULT})}}})(f),T=(n(28),function(){return a.a.createElement("div",{className:"app"},a.a.createElement("div",null,a.a.createElement(I,null),a.a.createElement(g,null),a.a.createElement(R,null),a.a.createElement(D,null)),a.a.createElement("div",null,a.a.createElement(A,null)),a.a.createElement("div",null,a.a.createElement(L,null)))}),x=n(3),O=function(e){for(var t=1,n=1;n<e;n++)t*=1.11;return e<=1?0:Math.round(5e3*(t-1)/11)},y=function(e,t){return O(t)-O(e)},w=function(e,t){return e.minPr===e.maxPr?e.maxPr:e.maxLv<=t?e.maxPr:e.minLv>t?0:e.minLv<=t?e.minPr+.01*(t-e.minLv):void 0},M=function(e,t){for(var n=new Array(e.length),r=1,a=0,l=e.length;a<l;a++){var u=w(e[a],t);n[a]=u*r,r*=1-u}return n},P=function(e,t){for(var n=0,r=M(e,t),a=0,l=r.length;a<l;a++)n+=r[a]*e[a].exp;return n},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.ADD_PRODUCTITEM:return{id:t.id,title:t.title,minLv:t.minLv,minPr:t.minPr/100,maxLv:parseInt(t.maxPr,10)-parseInt(t.minPr,10)+parseInt(t.minLv,10),maxPr:t.maxPr/100,value:t.value,exp:t.exp};default:return e}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.ADD_PRODUCTITEM:return[].concat(Object(c.a)(e),[C({},t)]);case s.REMOVE_ITEM:return e.filter(function(e){return e.id!==t.id});default:return e}},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.ADD_MATERIALITEM:return{id:t.id,title:t.title,amount:t.amount,value:t.value};default:return e}},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s.ADD_MATERIALITEM:return[].concat(Object(c.a)(e),[_({},t)]);case s.REMOVE_ITEM:return e.filter(function(e){return e.id!==t.id});default:return e}},S=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case s.CALCULATION_RESULT:var r=n.productitems,a=n.materialitems,l=function(e,t,n,r){for(var a=0,l=t,u=n;u<r;u++){var c=P(e,u);if(c>0){var o=Math.ceil(l/c);a+=o,l-=o*c}else a+=0,l=0;l+=y(u+1,u+2)}return a}(r,n.nextexp,n.nowlevel,n.targetlevel),u=function(e,t,n,r){for(var a=Array(e.length).fill(0),l=parseInt(t,10),u=n;u<r;u++){var c=M(e,u),o=P(e,u);if(o>0){for(var i=Math.ceil(l/o),m=0,v=e.length;m<v;m++)a[m]+=i*c[m];l-=i*o}else{for(var d=0,E=e.length;d<E;d++)a[d]+=0;l=0}l+=y(u+1,u+2)}return a}(r,n.nextexp,n.nowlevel,n.targetlevel),c=a.map(function(e){return e.amount}),o=(e=l,c.map(function(t){return t*e}));return{productNames:r.map(function(e){return e.title}),materialNames:a.map(function(e){return e.title}),productValues:r.map(function(e){return e.value}),materialValues:a.map(function(e){return e.value}),needAmounts:c,totalAmount:l,productAmounts:u,materialAmounts:o};case s.CLEAR_RESULT:return{};default:return t}},U=n(16),q=function(e){return function(t){return function(n){var r;return console.groupCollapsed("dispatching",n.type),console.log("prev state",e.getState()),console.log("action",n),r=t(n),console.log("next state",e.getState()),console.groupEnd(),r}}},k=function(e){return function(t){return function(n){var r=t(n);return localStorage["redux-store"]=JSON.stringify(e.getState()),r}}},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U;return Object(x.a)(q,k)(x.d)(Object(x.c)({MaterialItems:j,ProductItems:N,Calresult:S}),localStorage["redux-store"]?JSON.parse(localStorage["redux-store"]):e)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var J=V();window.React=a.a,window.store=J,Object(l.render)(a.a.createElement(u.a,{store:J},a.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[17,1,2]]]);
//# sourceMappingURL=main.e8d4db10.chunk.js.map